<div class="filters">
  <div class="zone-infos" *ngIf="(zoneInfos$ | async) as zoneInfos" cdk-scrollable>
    <ng-container *ngIf="(allInfo$ | async) as allInfo">
      <zone-info
        [info]="allInfo"
        [selected]="zoneInfoSelected === null"
        class="zone-info"
        (click)="onZoneInfoClick(null, 0)"
      ></zone-info>
    </ng-container>
    <ng-container *ngFor="let info$ of zoneInfos; let arrayIndex = index; trackBy: trackbyIndexFn">
      <ng-container *ngIf="(info$ | async) as info">
        <zone-info
          [info]="info"
          [selected]="info.id === zoneInfoSelected"
          class="zone-info"
          (click)="onZoneInfoClick(info.id, arrayIndex + 1)"
        ></zone-info>
      </ng-container>
    </ng-container>
    <div class="push"></div>
  </div>
</div>

<div class="zones" *ngIf="(zoneTables$ | async) as zoneTables">
  <ng-container *ngFor="let zone of (zones$ | async); let zoneIndex = index">
    <div class="zone" *ngIf="zoneInfoSelected === null || zoneInfoSelected === zoneIndex">
      <div class="zone_title">{{ zone.name }}</div>
      <div class="section" *ngFor="let section of zone.sections; let sectionIndex = index">
        <table
          [table]="table"
          (openTable)="onOpenTable(table)"
          class="table"
          *ngFor="let table of (zoneTables[zoneIndex][sectionIndex] | async); trackBy: trackbyIdFn"
        ></table>
      </div>
    </div>
  </ng-container>
</div>

<div class="block playing"></div>
<div class=""></div>
<ng-template #header let-disabled="disabled">
  <tournament-header
    [disabled]="disabled"
    (editClock)="onEditClock()"
    (editFilters)="onEditFilter()"
    (openActions)="onOpenActions()"
  ></tournament-header>
</ng-template>
<ng-template #menuHeader>{{ (tournament$ | async)?.name }}</ng-template>
<ng-template #clock><clock-panel (clockSet)="closePanel()"></clock-panel></ng-template>
<ng-template #filters><filters-panel [filters]="filters$ | async"></filters-panel></ng-template>
<ng-template #actions
  ><actions-panel [actions]="actions$ | async" (actionClick)="onActionClick($event)"></actions-panel
></ng-template>
<ng-template #addTime><add-time-panel [table]="selectedTable"></add-time-panel></ng-template>
<ng-template #table
  ><table-panel [table]="selectedTable" (addTime)="onAddTime(selectedTable)"></table-panel
></ng-template>
